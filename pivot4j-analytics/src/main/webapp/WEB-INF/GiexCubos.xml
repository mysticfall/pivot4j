<?xml version="1.0"?>
<Schema name="Divida">

    <Cube name ="Processos">
        <View alias="TB_GESTAO_PROCESSUAL">
            <SQL dialect="generic">
                <![CDATA[ select *from GIEXADMIN.TB_GESTAO_PROCESSUAL where CRED_ID_CREDOR = %CREDOR%]]> 
            </SQL>
        </View>
    
        <Dimension name="Tipo processo" foreignKey="PCTP_SG_PROCESSO">
            <Hierarchy hasAll="true" primaryKeyTable="TB_PROCESSO_TIPOS" primaryKey="PCTP_SG_PROCESSO"  allMemberName="Todos tipos">
                <Join leftKey="PCTP_SG_PROCESSO" rightKey="PCTP_SG_PROCESSO">
                    <Table name="TB_PROCESSO_TIPOS" schema="GIEXDOMINIO"/>
                    <View alias="TB_GESTAO_PROCESSUAL" schema="GIEXADMIN">
                        <SQL dialect="generic">
                <![CDATA[ select *from GIEXADMIN.TB_GESTAO_PROCESSUAL where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Tipo processo" table="TB_PROCESSO_TIPOS" column="PCTP_NM_PROCESSO" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Situação" foreignKey="SIPR_ID_SITUACAO">
            <Hierarchy hasAll="true" primaryKeyTable="TB_SITUACOES_PROCESSO" primaryKey="SIPR_ID_SITUACAO"  allMemberName="Todas Situações">
                <Join leftKey="SIPR_ID_SITUACAO" rightKey="SIPR_ID_SITUACAO">
                    <Table name="TB_SITUACOES_PROCESSO" schema="GIEXDOMINIO"/>
                    <View alias="TB_GESTAO_PROCESSUAL" schema="GIEXADMIN">
                        <SQL dialect="generic">
                <![CDATA[ select *from GIEXADMIN.TB_GESTAO_PROCESSUAL where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Situação" table="TB_SITUACOES_PROCESSO" column="SIPR_NM_SITUACAO" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Responsável">
            <Hierarchy hasAll="true" primaryKey="ASSI_ID_ASSINATURA" allMemberName="Todos responsáveis">
                <View alias="TB_GESTAO_PROCESSUAL">
                    <SQL dialect="generic">
                <![CDATA[ select *from GIEXADMIN.TB_GESTAO_PROCESSUAL where CRED_ID_CREDOR = %CREDOR%]]> 
                    </SQL>
                </View>
                <Level name="Responsável" column="ASSI_NM_RESPONSAVEL" type="String" uniqueMembers="true"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Digital?" foreignKey="PROC_ST_DIGITAL">
            <Hierarchy hasAll="true" primaryKeyTable="TB_SN" primaryKey="SN_ID" allMemberName="Digitais?">
                <Join leftKey="SN_ID" rightKey="PROC_ST_DIGITAL">
                    <Table name="TB_SN"/>
                    <View alias="TB_GESTAO_PROCESSUAL">
                        <SQL dialect="generic">
                <![CDATA[ select *from GIEXADMIN.TB_GESTAO_PROCESSUAL where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Digital?" table="TB_SN" column="SN_NM" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Measure name="Valor atualizado" column="PROC_VL_ATUALIZADO" aggregator="sum" formatString="R$ ###,###,###,##0.00"/>
        <Measure name="Valor de causa" column="PROC_VL_CAUSA" aggregator="sum" formatString="R$ ###,###,###,##0.00"/>
    </Cube>
    
    <Cube name="Divida">
        <View alias="TB_ANALISE_DIVIDAS_DIM01">
            <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
            </SQL>
        </View>

        <Dimension name="Situação" foreignKey="SITU_ID_SITUACAO">
            <Hierarchy hasAll="true" primaryKeyTable="TB_DEBITO_SITUACOES" primaryKey="SITU_ID_SITUACAO"  allMemberName="Todas situações">
                <Join leftKey="SITU_ID_SITUACAO" rightKey="SITU_ID_SITUACAO">
                    <Table name="TB_DEBITO_SITUACOES" schema="GIEXDOMINIO"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Situação" table="TB_DEBITO_SITUACOES" column="SITU_NM_SITUACAO" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
     
        <Dimension name="Fase" foreignKey="FASE_SG_FASE">
            <Hierarchy hasAll="true" primaryKeyTable="TB_DEBITO_FASES" primaryKey="FASE_SG_FASE" allMemberName="Todas fases">
                <Join leftKey="FASE_SG_FASE" rightKey="FASE_SG_FASE">
                    <Table name="TB_DEBITO_FASES" schema="GIEXDOMINIO"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Fase" table="TB_DEBITO_FASES" column="FASE_DS_FASE" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>

        <Dimension name="Origem">
            <Hierarchy hasAll="true" allMemberName="Todas origens">
                <Level name="Origem" column="CAOR_SG_ORIGEM" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Bairro">
            <Hierarchy hasAll="true" allMemberName="Todos bairros">
                <Level name="Bairro" column="CADA_DS_BAIRRO" uniqueMembers="true" type="String"/>
                <Level name="Lançamento" column="LANC_NR_LANCAMENTO" uniqueMembers="true" type="Integer"/>
            </Hierarchy>
        </Dimension>

        <Dimension name="Exercício" foreignKey="EXER_NR_LANCAMENTO">
            <Hierarchy hasAll="true" primaryKeyTable="TB_EXERCICIOS" primaryKey="EXER_NR_ANO" allMemberName="Todos exercícios">
                <Join leftKey="EXER_NR_ANO" rightKey="EXER_NR_LANCAMENTO">
                    <Table name="TB_EXERCICIOS" schema="GIEXDOMINIO"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Exercício" table="TB_EXERCICIOS" column="EXER_NR_ANO" uniqueMembers="true" type="Integer"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Cadastro algum outro pago" foreignKey="CADA_POSSUI_LANCS_PAGOS">
            <Hierarchy hasAll="true" primaryKeyTable="TB_SN" primaryKey="SN_ID" allMemberName="Todos">
                <Join leftKey="SN_ID" rightKey="CADA_POSSUI_LANCS_PAGOS">
                    <Table name="TB_SN"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Cadastro algum outro pago" table="TB_SN" column="SN_NM" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>

        <Dimension name="Pessoa algum outro pago" foreignKey="PESS_POSSUI_LANCS_PAGOS">
            <Hierarchy hasAll="true" primaryKeyTable="TB_SN" primaryKey="SN_ID" allMemberName="Todos">
                <Join leftKey="SN_ID" rightKey="PESS_POSSUI_LANCS_PAGOS">
                    <Table name="TB_SN"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Pessoa algum outro pago" table="TB_SN" column="SN_NM" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>        

        <Dimension name="Prescrito" foreignKey="LAID_ST_PRESCRITO">
            <Hierarchy hasAll="true" primaryKeyTable="TB_SN" primaryKey="SN_ID" allMemberName="Prescritos">
                <Join leftKey="SN_ID" rightKey="LAID_ST_PRESCRITO">
                    <Table name="TB_SN"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Prescrito" table="TB_SN" column="SN_NM" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Pessoas mais de um IMO" foreignKey="PESSOA_MAIS_1_CADASTROS_IMO">
            <Hierarchy hasAll="true" primaryKeyTable="TB_SN" primaryKey="SN_ID" allMemberName="Mais de um IMO">
                <Join leftKey="SN_ID" rightKey="PESSOA_MAIS_1_CADASTROS_IMO">
                    <Table name="TB_SN"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Mais de um IMO?" table="TB_SN" column="SN_NM" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Pessoas mais de um MOB" foreignKey="PESSOA_MAIS_1_CADASTROS_MOB">
            <Hierarchy hasAll="true" primaryKeyTable="TB_SN" primaryKey="SN_ID" allMemberName="Mais de um MOB">
                <Join leftKey="SN_ID" rightKey="PESSOA_MAIS_1_CADASTROS_MOB">
                    <Table name="TB_SN"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Mais de um MOB?" table="TB_SN" column="SN_NM" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Dimension name="Pessoas mais de um diverso" foreignKey="PESSOA_MAIS_1_CADASTROS_OUTROS">
            <Hierarchy hasAll="true" primaryKeyTable="TB_SN" primaryKey="SN_ID" allMemberName="Mais de um diverso">
                <Join leftKey="SN_ID" rightKey="PESSOA_MAIS_1_CADASTROS_OUTROS">
                    <Table name="TB_SN"/>
                    <View alias="TB_ANALISE_DIVIDAS_DIM01">
                        <SQL dialect="generic">
                <![CDATA[ select *from TB_ANALISE_DIVIDAS_DIM01 where CRED_ID_CREDOR = %CREDOR%]]> 
                        </SQL>
                    </View>
                </Join>
                <Level name="Mais de um diverso?" table="TB_SN" column="SN_NM" uniqueMembers="true" type="String"/>
            </Hierarchy>
        </Dimension>
        
        <Measure name="Valor atualizado" column="LAVA_VL_ATUALIZADO" aggregator="sum" formatString="R$ ###,###,###,##0.00"/>
    </Cube>
    
</Schema>